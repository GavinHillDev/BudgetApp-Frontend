<main class="main">
  <div class="content">
    <h1 id="UserName">Hello {{userName}}</h1>
    <h1>You Have Spent ${{amountSpent}}</h1>
  </div>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Date</th>
        <th>Category</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of transactions">
        <td>{{ t.transactionName }}</td>
        <td>{{ t.transactionPrice }}</td>
        <td>{{ t.transactionDate }}</td>
        <td>{{ t.categoryName }}</td>
        <td><button (click)="UpdateTransaction(t)">Update</button></td>
        <td><button (click)="DeleteTransaction(t.id)">Delete</button></td>
      </tr>
    </tbody>
  </table>

  <!-- Update Transaction Modal -->
  <div class="modal-overlay" *ngIf="isUpdateOpen">
    <div class="modal">

      <h2>Update Transaction</h2>

      <form [formGroup]="form">
        <label>
          Name
          <input type="text" formControlName="TransactionNameUpdate">
        </label>

        <label>
          Price
          <input type="number" formControlName="TransactionPriceUpdate">
        </label>

        <label>
          Date
          <input type="date" formControlName="TransactionDateUpdate">
        </label>
        <label for="TransactionCategory">Category: </label>
        <input type="text" formControlName="TransactionCategoryUpdate" list="categoryList" placeholder="Transaction Category">
        <datalist id="categoryList">
          @for (item of categories; track item.id) {
          <option [value]="item.categoryName"></option>
          } @empty {
          <option value="">No categories</option>
          }
        </datalist>

        <div class="modal-actions">
          <button type="button" class="btn cancel" (click)="closeUpdate()">
            Cancel
          </button>

          <button type="button" class="btn save" (click)="SubmitUpdate()">
            Save Changes
          </button>
        </div>
      </form>

    </div>
  </div>

</main>


<router-outlet />

